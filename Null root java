<!DOCTYPE html>
<!--
  Broken Script — index.html
  But: ce fichier est une page autonome qui illustre les principes :
  - {null} (trou noir / vide corrompu) : éléments qui disparaissent, glitch, silence
  - {root} / {1} (fontaine blanche / trou blanc) : émission, particles, lumière

  Usage : enregistrer comme index.html et ouvrir dans un navigateur moderne.
  Auteur : créé pour l'utilisateur — modifier librement.
-->
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Broken Script — Null vs Fountain</title>
<style>
  :root{
    --bg:#06060a;
    --accent:#00f6ff;
    --danger:#ff2d55;
    --light:#ffffff;
    --glass: rgba(255,255,255,0.06);
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,'Helvetica Neue',Arial}
  body{background: radial-gradient(ellipse at center, rgba(255,255,255,0.02) 0%, rgba(0,0,0,0.7) 50%, #000000 100%), var(--bg); color:var(--light); overflow:hidden}

  /* Layout */
  .app{display:grid;grid-template-columns:360px 1fr; gap:24px; height:100vh; padding:28px}
  .panel{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border-radius:14px; padding:18px; box-shadow:0 6px 24px rgba(0,0,0,0.6); border:1px solid rgba(255,255,255,0.03)}

  header{display:flex;align-items:center;gap:12px}
  header h1{font-size:18px;margin:0}
  header p{margin:0;font-size:12px;opacity:0.8}

  .controls{margin-top:12px;display:flex;flex-direction:column;gap:10px}
  .btn{padding:10px 12px;border-radius:10px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:var(--light);cursor:pointer}
  .btn:active{transform:translateY(1px)}
  .btn.primary{background:linear-gradient(90deg,var(--accent),#7fffeb);color:#001}

  .state-box{margin-top:12px;padding:12px;border-radius:10px;background:var(--glass);font-family:monospace;font-size:13px}

  .preview{position:relative;overflow:hidden;border-radius:14px}
  .canvas-area{position:relative;height:100%;min-height:100vh}

  /* GLITCH text */
  .glitch{position:relative;font-family:monospace;font-weight:700;letter-spacing:0.6px}
  .glitch::before, .glitch::after{content:attr(data-text);position:absolute;left:0;top:0;mix-blend-mode:screen;opacity:0.8}
  .glitch::before{color:#ff6b6b;transform:translate(2px,-2px);clip-path:rect(0,900px,40px,0);animation:glitch-1 2.5s infinite}
  .glitch::after{color:#9be7ff;transform:translate(-2px,2px);clip-path:rect(80px,900px,140px,0);animation:glitch-2 3s infinite}
  @keyframes glitch-1{0%{transform:translate(2px,-2px)}20%{transform:translate(-3px,1px)}40%{transform:translate(2px,0)}60%{transform:translate(0,-1px)}100%{transform:translate(2px,-2px)}}
  @keyframes glitch-2{0%{transform:translate(-2px,2px)}30%{transform:translate(1px,-1px)}60%{transform:translate(-1px,2px)}100%{transform:translate(-2px,2px)}}

  /* NULL effect: fade out + ripple */
  .nulled{filter:grayscale(1) blur(2px) contrast(0.6) ; opacity:0; transform:scale(0.98); transition: all 600ms cubic-bezier(.2,.9,.3,1)}

  /* WHITE FOUNTAIN particles */
  .particles{position:absolute;inset:0;pointer-events:none}
  .particle{position:absolute;width:6px;height:6px;border-radius:50%;background:rgba(255,255,255,0.95);opacity:0.9; will-change:transform,opacity}

  /* HUD text area */
  .log{margin-top:12px;height:160px;overflow:auto;background:rgba(0,0,0,0.4);padding:10px;border-radius:8px;font-family:monospace;font-size:12px}

  /* Footer */
  footer{position:absolute;left:20px;bottom:20px;font-size:12px;opacity:0.8}

  /* Responsive */
  @media (max-width:900px){.app{grid-template-columns:1fr; padding:12px}.panel{order:2}}
</style>
</head>
<body>
  <div class="app">
    <aside class="panel">
      <header>
        <div>
          <h1>Broken Script</h1>
          <p>Simulateur — {null} ↔ {root}</p>
        </div>
      </header>

      <div class="controls">
        <div>
          <button id="btn-null" class="btn">Activer {null}</button>
          <button id="btn-root" class="btn primary">Activer {root}</button>
        </div>

        <div class="state-box">
          État actuel : <span id="state">{root}</span>
        </div>

        <div style="display:flex;gap:8px">
          <button id="glitch-btn" class="btn">Lancer glitch</button>
          <button id="reset-btn" class="btn">Réinitialiser</button>
        </div>

        <div class="log" id="log">
          /* log du script */<br>
        </div>
      </div>

      <div style="margin-top:14px;font-size:12px;opacity:0.9">
        <strong>Notes :</strong>
        <ul>
          <li>{null} corrompt le DOM — éléments se vidangent.</li>
          <li>{root} émet : particles, texte lumineux.</li>
          <li>Le site est autonome, modifie le code pour personnaliser.</li>
        </ul>
      </div>
    </aside>

    <main class="panel preview">
      <div class="canvas-area" id="canvas">
        <!-- Fond central : singularity (trou noir) -->
        <div id="singularity" style="position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:420px;height:420px;border-radius:50%;background:radial-gradient(circle at 35% 35%, rgba(255,255,255,0.02), rgba(0,0,0,1) 60%);box-shadow:0 0 120px 30px rgba(0,0,0,0.7), inset 0 0 40px rgba(255,255,255,0.02);display:flex;align-items:center;justify-content:center;}">
          <div id="sig-text" class="glitch" data-text="{root}" style="font-size:36px;color:rgba(255,255,255,0.9)">{root}</div>
        </div>

        <!-- Contenu simulé -->
        <div id="content" style="position:absolute;inset:18px;padding:28px;pointer-events:auto">
          <h2 style="margin-top:0">Le Script</h2>
          <p id="para">Ceci est une page expérimentale. Le Script peut être corrompu — appuie sur <strong>{null}</strong> pour observer.</p>

          <div style="display:flex;gap:10px;margin-top:18px">
            <div class="card" style="padding:12px;border-radius:10px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));width:240px">
              <h3>Module A</h3>
              <p>Contenu du module A. Il peut être aspiré vers {null}.</p>
            </div>
            <div class="card" style="padding:12px;border-radius:10px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));width:240px">
              <h3>Module B</h3>
              <p>Contenu du module B. Testez la corruption sur ce bloc.</p>
            </div>
          </div>

          <div style="margin-top:22px">
            <pre style="background:rgba(0,0,0,0.5);padding:14px;border-radius:8px;font-family:monospace">{script}
  line 1: init
  line 2: spawn root
  line 3: // ...
</pre>
          </div>
        </div>

        <!-- Particles layer -->
        <div class="particles" id="particles"></div>

        <footer>Broken Script — Simulation</footer>
      </div>
    </main>
  </div>

<script>
// Broken Script — logique basique
(() => {
  const stateEl = document.getElementById('state');
  const log = document.getElementById('log');
  const btnNull = document.getElementById('btn-null');
  const btnRoot = document.getElementById('btn-root');
  const btnGlitch = document.getElementById('glitch-btn');
  const btnReset = document.getElementById('reset-btn');
  const content = document.getElementById('content');
  const sigText = document.getElementById('sig-text');
  const particles = document.getElementById('particles');
  let current = '{root}';
  let particleInterval = null;

  function writeLog(txt){
    log.innerHTML += txt + '<br>';
    log.scrollTop = log.scrollHeight;
  }

  function enterNull(){
    if(current === '{null}') return;
    current = '{null}';
    stateEl.textContent = current;
    writeLog('État → {null} : corruption en cours...');
    // corrompre des éléments
    document.querySelectorAll('.card, p, pre, h2, h3').forEach((el, i) => {
      setTimeout(()=>{
        el.classList.add('nulled');
      }, i*160);
    });
    // modifier singularity
    sigText.textContent = '{null}';
    sigText.setAttribute('data-text','{null}');
    document.body.style.background = '#000';
    stopParticles();
  }

  function enterRoot(){
    if(current === '{root}') return;
    current = '{root}';
    stateEl.textContent = current;
    writeLog('État → {root} : emission active');
    // restaurer éléments
    document.querySelectorAll('.nulled').forEach((el)=>{
      el.classList.remove('nulled');
    });
    sigText.textContent = '{root}';
    sigText.setAttribute('data-text','{root}');
    document.body.style.background = 'radial-gradient(ellipse at center, rgba(255,255,255,0.02) 0%, rgba(0,0,0,0.7) 50%, #000000 100%), var(--bg)';
    startParticles();
  }

  function glitch(){
    writeLog('-- glitch initiated --');
    const t = document.createElement('div');
    t.className = 'glitch';
    t.dataset.text = 'ERROR';
    t.textContent = 'ERROR';
    t.style.position = 'absolute';
    t.style.left = (20 + Math.random()*60) + '%';
    t.style.top = (20 + Math.random()*60) + '%';
    t.style.fontSize = '28px';
    t.style.pointerEvents = 'none';
    document.getElementById('canvas').appendChild(t);
    setTimeout(()=>t.remove(), 2000 + Math.random()*1000);
  }

  function startParticles(){
    stopParticles();
    particleInterval = setInterval(()=>{
      for(let i=0;i<6;i++) spawnParticle();
    }, 180);
  }
  function stopParticles(){
    clearInterval(particleInterval); particleInterval = null;
    // fade out existing
    document.querySelectorAll('.particle').forEach(p=>p.remove());
  }

  function spawnParticle(){
    const p = document.createElement('div');
    p.className = 'particle';
    const x = window.innerWidth * (0.3 + Math.random()*0.4);
    const y = window.innerHeight * (0.4 + Math.random()*0.25);
    p.style.left = (x + (Math.random()-0.5)*50) + 'px';
    p.style.top = (y + (Math.random()-0.5)*50) + 'px';
    const scale = 0.5 + Math.random()*1.6;
    p.style.transform = `scale(${scale})`;
    particles.appendChild(p);

    const dx = (Math.random()-0.5)*800;
    const dy = - (300 + Math.random()*800);
    const rot = (Math.random()-0.5)*360;
    p.animate([
      {transform:`translate(0,0) scale(${scale}) rotate(0deg)`, opacity:1},
      {transform:`translate(${dx}px, ${dy}px) scale(${scale*0.1}) rotate(${rot}deg)`, opacity:0}
    ], {duration: 2600 + Math.random()*1500, easing:'cubic-bezier(.2,.9,.3,1)'}).onfinish = ()=>p.remove();
  }

  // Events
  btnNull.addEventListener('click', enterNull);
  btnRoot.addEventListener('click', enterRoot);
  btnGlitch.addEventListener('click', glitch);
  btnReset.addEventListener('click', ()=>{
    writeLog('Réinitialisation complète');
    document.querySelectorAll('.nulled').forEach(el=>el.classList.remove('nulled'));
    sigText.textContent = '{root}';
    stateEl.textContent = '{root}';
    document.body.style.background = 'radial-gradient(ellipse at center, rgba(255,255,255,0.02) 0%, rgba(0,0,0,0.7) 50%, #000000 100%), var(--bg)';
    startParticles();
  });

  // démarrer en root
  enterRoot();
  writeLog('Boot : {root} initialisé');
})();
</script>
</body>
</html>
